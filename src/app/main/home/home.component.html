<!--Barra de Navegacion -->
<app-navbar (mensaje)="recibirMensaje( $event )"></app-navbar>

<!-- Compra -->
<div *ngIf="itemsToBuy" class="message">
  <section class="section-container-books">
    <h3>{{ message }}</h3>
    <hr>
    <diV *ngFor="let book of cart" class="carrito-card">
      <mat-card class="example-card" >
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>{{ book.titulo }}</mat-card-title>
            <mat-card-subtitle>{{ book.autor }}</mat-card-subtitle>
            <mat-card-subtitle>Precio: ${{ book.precio }}</mat-card-subtitle>
          </mat-card-title-group>
        </mat-card-header>
      </mat-card>
    </diV>
    <mat-list role="list">
      <mat-list-item role="listitem">Precio total: ${{costoTotal}}</mat-list-item>
    </mat-list>
  </section>
  <button type="button" mat-raised-button color="primary" (click)="validateBuy()">Finalizar Compra</button>
</div>
<!-- Seccion de libros disponibles-->
<div *ngIf="!itemsToBuy" cdkDropListGroup class="store">
  <section
    class="section-container-books"
    cdkDropList
    [cdkDropListData]="books"
    (cdkDropListDropped)="drop($event)">
    <h1>Libros</h1>
    <hr>
    <div class="products">
      <mat-card class="card" *ngFor="let book of books" cdkDrag>
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>{{ book.titulo }}</mat-card-title>
            <mat-card-subtitle>{{ book.autor }}</mat-card-subtitle>
            <mat-card-subtitle>Pais: {{ book.pais }}</mat-card-subtitle>
            <mat-card-subtitle>Idioma: {{book.idioma}}</mat-card-subtitle>
            <mat-card-subtitle>Año: {{book.year}}</mat-card-subtitle>
            <mat-card-subtitle>Precio: ${{ book.precio }}</mat-card-subtitle>
            <mat-card-subtitle><a [href] = "book.link" target="_blank" rel="noopener noreferrer">+Info</a></mat-card-subtitle>
            <img mat-card-image [src]="'../../../assets/' + book.imagen" title="asdqwe" [alt]="book.titulo" width="25%">
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content>
          <br>
        </mat-card-content>
      </mat-card>
    </div>
  </section>
  <section
    class="section-container-shop"
    cdkDropList
    [cdkDropListData]="cart"
    (cdkDropListDropped)="drop($event)"
    *ngIf="logued"
  >
    <h1>Carrito</h1>
    <section class="section-container-books">
      <div class="shopping-cart">
        <button type="button" mat-raised-button color="primary" (click)="buy()">Comprar</button>
        <button *ngIf="cart.length > 0" type="button" mat-raised-button color="warn" (click)="vaciar()" class="boton-derecha">
          Vaciar
        </button>
      </div>
    </section>


    <div class="shopping-cart">
      <mat-card class="card" *ngFor="let book of cart" cdkDrag>
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>{{ book.titulo }}</mat-card-title>
            <mat-card-subtitle>{{ book.autor }}</mat-card-subtitle>
            <mat-card-subtitle>Pais: {{ book.pais }}</mat-card-subtitle>
            <mat-card-subtitle>Idioma: {{book.idioma}}</mat-card-subtitle>
            <mat-card-subtitle>Año: {{book.year}}</mat-card-subtitle>
            <mat-card-subtitle>Precio: ${{ book.precio }}</mat-card-subtitle>
            <img mat-card-image [src]="'../../../assets/' + book.imagen" title="asd" [alt]="book.titulo" width="25%">
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content>
          <br>
        </mat-card-content>
      </mat-card>
    </div>

  </section>
</div>

